{"version":3,"sources":["services/names.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","Button","handleClick","text","onClick","HandleInput","newText","setTextChange","value","onChange","event","target","Notification","message","className","App","useState","persons","setPersons","newName","setNewName","newNumber","setNewNumber","searchName","setSearchName","confirmMessage","setConfirmMessage","useEffect","nameService","initialNames","filteredNames","filter","person","name","toLowerCase","indexOf","personsToShow","length","onSubmit","preventDefault","nameObject","number","targetedName","window","confirm","returnedName","map","n","setTimeout","catch","error","console","log","alert","concat","type","find","deleteName","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.48f5f7e7.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n  }\r\n\r\nconst create = newObject => {\r\n    const request = axios.post(baseUrl, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst deleteID = (id) =>{\r\n    const request = axios.delete(`${baseUrl}/${id}`)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nexport default {getAll, create, update, deleteID}","import React, { useState, useEffect } from 'react'\nimport nameService from \"./services/names\"\nimport './index.css'\n\nconst Button = ({handleClick, text}) => (\n  <button onClick ={handleClick}>{text}</button>\n)\n\nconst HandleInput = ({newText, setTextChange}) => <input value = {newText} onChange={(event) => setTextChange(event.target.value)}/>\n\nconst Notification = ({ message }) => {\n  if (message === null) {\n    return null\n  }\n\n  return (\n    <div className=\"confirmation\">\n      {message}\n    </div>\n  )\n}\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([]) \n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ searchName, setSearchName ] = useState('')\n  const [confirmMessage, setConfirmMessage] = useState(null)\n  \n  useEffect(() => nameService.getAll().then(initialNames => setPersons(initialNames)),[])\n  const addName = (event) => {\n    event.preventDefault()\n    const nameObject = {\n      name: newName,\n      number: newNumber\n    }\n    const filteredNames =persons.filter(person => person.name === newName)\n    const targetedName = filteredNames[0]\n    \n    \n    filteredNames.length > 0 ? \n    targetedName.number !== newNumber ? \n    window.confirm(`${newName} is already added to phonebook, replace the old number with a new one? `) ?\n    nameService.update(targetedName.id, nameObject ).then(returnedName =>{\n      setPersons(persons.map(n => n.id !== targetedName.id ? n : returnedName ))\n      setConfirmMessage(`Changed ${newName}'s number to ${newNumber}`)\n      setTimeout(() =>{\n        setConfirmMessage(null)\n      }, 5000)\n      setNewName('')\n      setNewNumber(\"\")\n    }).catch(error => {\n      setConfirmMessage(error.response.data.error)\n      setTimeout(() =>{\n        setConfirmMessage(null)\n      }, 5000)}) :\n    console.log(\"Choosed no\"):\n    alert(`${newName} is already added to phonebook`):\n    nameService.create(nameObject).then(returnedName =>{\n      setPersons(persons.concat(returnedName))\n      setConfirmMessage(`Added ${newName}`)\n      setTimeout(() =>{\n        setConfirmMessage(null)\n      }, 5000)\n      setNewName('')\n      setNewNumber(\"\")\n    }).catch(error => {\n      setConfirmMessage(error.response.data.error)\n      setTimeout(() =>{\n        setConfirmMessage(null)\n      }, 5000)\n    })\n\n  }\n\n  const filteredNames = persons.filter(person => person.name.toLowerCase().indexOf(searchName.toLowerCase()) !== -1)\n  const personsToShow = filteredNames.length > 0 ? filteredNames : persons\n\n  const deleteName = id => {\n    const person = persons.find(n => n.id === id)\n    if(window.confirm(`Delete ${person.name} ?`))\n    {nameService.deleteID(id).then(() => setPersons(persons.filter(n => n.id !== id))).catch(error => {\n      setConfirmMessage(`Information of ${person.name} has already been removed from server`)\n      setTimeout(() =>{\n        setConfirmMessage(null)\n      }, 5000)\n    })}\n  }\n\n  return (\n    <div>\n      <h2>phonebook</h2>\n      <Notification message={confirmMessage} />\n      <div>\n        filter shown with <HandleInput newText ={searchName} setTextChange ={setSearchName}/>\n      </div>\n      <h2>add a new</h2>\n      <form onSubmit={addName}>\n        <div>\n          name: <HandleInput newText = {newName} setTextChange = {setNewName}/>\n        </div>\n        <div>number: <HandleInput newText ={newNumber} setTextChange ={setNewNumber}/></div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n      <h2>Numbers</h2>\n      <ul>\n        {personsToShow.map(person => \n        <li key = {person.name}>\n          {person.name} {person.number} \n          <Button text =\"delete\" handleClick = {() => deleteName(person.id)}/>\n        </li>)}\n      </ul>\n    </div>\n  )\n}\n\nexport default App","import ReactDOM from 'react-dom'\nimport App from './App.js'\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}